{"version":3,"sources":["sw.js"],"names":["CACHE_STATIC_VERSION","CACHE_DYNAMIC_VERSION","STATIC_FILES","cacheResources","cache","caches","open","addAll","activate","keys","Promise","all","map","key","delete","cacheFallBackToNetwork","req","match","response","fetch","ok","staticCache","put","url","clone","err","console","error","self","addEventListener","event","waitUntil","respondWith","request"],"mappings":"AAAA,MAAMA,oBAAoB,GAAG,aAA7B;AACA,MAAMC,qBAAqB,GAAG,cAA9B;AAEA,MAAMC,YAAY,GAAG,CACnB,GADmB,EAEnB,yDAFmB,CAArB;;AAKA,MAAMC,cAAc,GAAG,YAAY;AACjC,QAAMC,KAAK,GAAG,MAAMC,MAAM,CAACC,IAAP,CAAYN,oBAAZ,CAApB;AACA,SAAOI,KAAK,CAACG,MAAN,CAAaL,YAAb,CAAP;AACD,CAHD;;AAKA,MAAMM,QAAQ,GAAG,YAAY;AAC3B,QAAMC,IAAI,GAAG,MAAMJ,MAAM,CAACI,IAAP,EAAnB;AAEA,SAAOC,OAAO,CAACC,GAAR,CACLF,IAAI,CAACG,GAAL,CAASC,GAAG,IAAI;AACd,QAAIA,GAAG,KAAKb,oBAAZ,EAAkC,OAAOK,MAAM,CAACS,MAAP,CAAcD,GAAd,CAAP;AACnC,GAFD,CADK,CAAP;AAKD,CARD;;AAUA,MAAME,sBAAsB,GAAG,MAAMC,GAAN,IAAa;AAC1C,QAAMZ,KAAK,GAAG,MAAMC,MAAM,CAACY,KAAP,CAAaD,GAAb,CAApB;;AAEA,MAAIZ,KAAJ,EAAW;AACT,WAAOA,KAAP;AACD;;AAED,MAAI;AACF,UAAMc,QAAQ,GAAG,MAAMC,KAAK,CAACH,GAAD,CAA5B;;AACA,QAAIE,QAAQ,CAACE,EAAb,EAAiB;AACf,YAAMC,WAAW,GAAG,MAAMhB,MAAM,CAACC,IAAP,CAAYL,qBAAZ,CAA1B;AACAoB,MAAAA,WAAW,CAACC,GAAZ,CAAgBN,GAAG,CAACO,GAApB,EAAyBL,QAAQ,CAACM,KAAT,EAAzB;AACD;;AACD,WAAON,QAAP;AACD,GAPD,CAOE,OAAOO,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,KAAR,CAAc,4BAAd,EAA4CF,GAA5C;AACD;AACF,CAjBD;;AAmBAG,IAAI,CAACC,gBAAL,CAAsB,SAAtB,EAAiCC,KAAK,IAAI;AACxCA,EAAAA,KAAK,CAACC,SAAN,CAAgB5B,cAAc,EAA9B;AACD,CAFD;AAIAyB,IAAI,CAACC,gBAAL,CAAsB,UAAtB,EAAkCC,KAAK,IAAI;AACzCA,EAAAA,KAAK,CAACC,SAAN,CAAgBvB,QAAQ,EAAxB;AACD,CAFD;AAIAoB,IAAI,CAACC,gBAAL,CAAsB,OAAtB,EAA+BC,KAAK,IAAI;AACtCA,EAAAA,KAAK,CAACE,WAAN,CAAkBjB,sBAAsB,CAACe,KAAK,CAACG,OAAP,CAAxC;AACD,CAFD","file":"sw.js","sourceRoot":"../src","sourcesContent":["const CACHE_STATIC_VERSION = 'static-v0.3';\nconst CACHE_DYNAMIC_VERSION = 'dynamic-v0.3';\n\nconst STATIC_FILES = [\n  '/',\n  'https://fonts.googleapis.com/css?family=Lato:300,400,90',\n];\n\nconst cacheResources = async () => {\n  const cache = await caches.open(CACHE_STATIC_VERSION);\n  return cache.addAll(STATIC_FILES);\n};\n\nconst activate = async () => {\n  const keys = await caches.keys();\n\n  return Promise.all(\n    keys.map(key => {\n      if (key !== CACHE_STATIC_VERSION) return caches.delete(key);\n    }),\n  );\n};\n\nconst cacheFallBackToNetwork = async req => {\n  const cache = await caches.match(req);\n\n  if (cache) {\n    return cache;\n  }\n\n  try {\n    const response = await fetch(req);\n    if (response.ok) {\n      const staticCache = await caches.open(CACHE_DYNAMIC_VERSION);\n      staticCache.put(req.url, response.clone());\n    }\n    return response;\n  } catch (err) {\n    console.error('ðŸ›‘ An error has hapenned: ', err);\n  }\n};\n\nself.addEventListener('install', event => {\n  event.waitUntil(cacheResources());\n});\n\nself.addEventListener('activate', event => {\n  event.waitUntil(activate());\n});\n\nself.addEventListener('fetch', event => {\n  event.respondWith(cacheFallBackToNetwork(event.request));\n});\n"]}